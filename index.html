<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Delphi | Oracle for Taste and Culture</title>
  <style>
    /* Base */
    html,body{margin:0;background:#fff;color:#111;font-family:"Helvetica Neue",Arial,sans-serif;line-height:1.6}
    html{scroll-behavior:smooth}
    a{color:inherit;text-decoration:none}

    /* Header */
    header{
      position:sticky;top:0;z-index:1000;
      background:#fff;
      display:flex;align-items:center;justify-content:space-between;
      padding:34px 60px;
    }
    header h1{
      margin:0;font-family:"Times New Roman",serif;
      font-weight:400;letter-spacing:.5px;font-size:40px;
    }

    .header-right{display:flex;align-items:center;gap:18px;position:relative}

    /* Buttons */
    .cta-btn,
    .login-btn{
      border:1px solid #111;
      background:transparent;
      cursor:pointer;
      color:#000;
      font-family:"Times New Roman",serif;
      text-decoration:none;
      transition:background .2s,color .2s;
      white-space:nowrap;
    }
    .cta-btn:hover,
    .login-btn:hover{background:#111;color:#fff}

    /* Reserve button: make it feel intentional */
    .cta-btn{
      padding:12px 22px;
      font-size:15px;
      border-radius:999px;
    }

    /* Login button stays crisp */
    .login-btn{
      padding:10px 14px;
      font-size:14px;
      border-radius:0;
    }

    /* Login popover */
    .login-pop{
      position:absolute;
      right:0;
      top:calc(100% + 14px);
      width:320px;
      padding:16px;
      border:1px solid #111;
      background:#fff;
      box-shadow:0 12px 30px rgba(0,0,0,.12);
      display:none;
      z-index:2000;
      text-align:left;
    }
    .login-pop.open{display:block}
    .login-pop h3{
      margin:0 0 10px;
      font-family:"Times New Roman",serif;
      font-weight:700;
      font-size:16px;
      letter-spacing:.2px;
    }
    .login-pop p{
      margin:0 0 12px;
      font-size:12px;
      color:#555;
      line-height:1.4;
    }
    .login-row{display:flex;gap:10px;align-items:center}
    .login-row input{
      flex:1;
      padding:10px 10px;
      border:1px solid #111;
      font-size:13px;
    }
    .login-row button{
      padding:10px 12px;
      border:1px solid #111;
      background:#111;
      color:#fff;
      cursor:pointer;
      font-size:13px;
      font-family:"Times New Roman",serif;
    }
    .login-row button:hover{opacity:.9}
    .login-msg{margin-top:10px;font-size:12px;color:#666;min-height:16px}
    .login-close{
      position:absolute;top:10px;right:10px;
      border:none;background:transparent;cursor:pointer;
      font-size:16px;line-height:1;color:#111;
    }

    /* Sections: tighten default spacing globally */
    .section{ text-align:center; padding:28px 20px; }
    .section h2{
      font-family:"Times New Roman",serif;
      font-size:32px;margin:0 0 10px;font-weight:700
    }

    .section-subtitle{
      font-size:18px;
      color:#000000;
      margin:0 0 18px; /* tighter */
    }

    /* HERO (desktop crop already good) */
    .hero-with-bg{
      position:relative;
      display:flex;
      align-items:center;
      justify-content:center;
      text-align:center;
      color:#fffbfb;
      padding:80px 20px 52px; /* slightly tighter bottom */
      background:
        url("images/ocean_03 copy.jpeg")
        center/cover no-repeat;
    }
    .hero-with-bg h2{
      font-size:56px;font-family:"Times New Roman",serif;
      font-weight:400;margin:0 0 12px
    }
    .hero-with-bg p{
      font-size:18px;max-width:740px;margin:6px auto 0;color:#ffffff
    }

    /* Feature Image + About */
    #about-split{padding:12px 0 28px} /* tighter */
    .split{
      max-width:1200px;margin:0 auto;padding:0 20px;
      display:grid;grid-template-columns:1.25fr 1fr;gap:40px;align-items:center;
    }
    .split .image-box{
      width:100%;aspect-ratio:3/2;border:1px solid #eee;
      background:#f3f4f6;overflow:hidden;
    }
    .split .image-box img{
      width:100%;height:100%;object-fit:cover;display:block
    }
    .about-copy p{
      margin:0;font-size:16px;line-height:1.6;color:#111
    }
    .about-copy p:first-letter{
      float:left;font-family:"Times New Roman",serif;font-weight:700;
      font-size:110px;line-height:.85;
      letter-spacing:-2px;padding-right:14px;padding-top:6px;
      margin-top:-4px;color:#111
    }

    /* Beta form: tighten gaps */
    #beta-form{
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:10px;              /* KEY: remove huge whitespace */
      margin-top:16px;
    }
    input[type="text"],input[type="email"],input[type="tel"]{
      margin:0;              /* KEY: remove per-input margins */
      padding:14px;
      border:1px solid #111;
      font-size:14px;
      max-width:560px;
      width:100%;
    }
    input::placeholder{
      font-size:12px;
      color:#777;
    }
    #beta-message{
      font-size:13px;color:#666;margin-top:6px;min-height:18px
    }

    /* Footer */
    .footer{
      text-align:center;
      padding:34px 20px;
      border-top:1px solid #ddd;
      color:#666;
      font-size:14px;
    }
    .footer-note{
      margin:0 0 10px;
      font-size:12px;
      color:#777;
      line-height:1.4;
    }

    @media (max-width: 800px){
      header{padding:20px 18px}
      header h1{font-size:34px}

      /* Mobile hero: HARD crop */
      .hero-with-bg{
        padding:52px 16px 18px;       /* KEY: very tight bottom */
        background-position:center center;
      }
      .hero-with-bg h2{font-size:44px}
      .hero-with-bg p{font-size:16px}

      /* Button bigger on mobile */
      .cta-btn{
        width:min(560px, 100%);
        padding:14px 22px;
        font-size:16px;
      }

      .split{grid-template-columns:1fr;gap:20px}
      .login-pop{width:min(320px, calc(100vw - 36px)); right:0;}

      /* Further reduce space between Join Circle and About on mobile */
      #beta.section{padding-bottom:18px}
      #about.section{padding-top:18px}
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header>
    <h1>Delphi</h1>

    <div class="header-right">
      <button class="login-btn" id="loginBtn" type="button">Login</button>

      <!-- Login popover -->
      <div class="login-pop" id="loginPop" aria-label="Login">
        <button class="login-close" id="loginClose" type="button" aria-label="Close">×</button>
        <h3>Beta Access</h3>
        <p>Enter your approved email to receive a magic link.</p>
        <form id="login-form">
          <div class="login-row">
            <input type="email" name="email" placeholder="email" required />
            <button type="submit">Send Link</button>
          </div>
          <div class="login-msg" id="login-msg"></div>
        </form>
      </div>
    </div>
  </header>

  <!-- HERO -->
  <section class="hero-with-bg" aria-label="Your Oracle for Taste and Culture">
    <div>
      <h2>Your Oracle for Taste and Culture</h2>
      <p>No lists, no reviews. Just the right recommendation, right away.</p>
      <p>Next Generation Discovery. Curated. Collective. Intelligent.</p>
    </div>
  </section>

<!-- Waitlist -->
<section class="section" id="beta">
  <h2>Join</h2>
  <p>Request Access to Oracle and Editorial</p>

  <form id="beta-form" novalidate>
    <input 
      type="text" 
      name="name" 
      placeholder="name"
    >

    <input
      type="text"
      name="email"
      placeholder="email *we'll only email you when worth opening"
    >

    <input
      type="text"
      name="zip"
      placeholder="zip code *currently available in select cities"
      aria-label="ZIP Code"
    >
  </form>
</section>

  <!-- ABOUT DELPHI -->
  <section class="section" id="about">
    <h2><strong>ABOUT DELPHI</strong></h2>
    <p class="section-subtitle">New members are admitted on a rolling basis.</p>
  </section>

  <!-- Feature Image + About -->
  <section id="about-split" aria-label="Feature image and About Delphi">
    <div class="split">
      <div class="image-box">
        <img src="images/phone_01 copy.jpeg" alt="Delphi feature image">
      </div>
      <div class="about-copy" id="editorial">
        <p>
          A new way to discover where to go and what to do — one that speaks your language, understands your taste, and saves you time.
          You ask. Delphi answers — with recommendations that are clear, chic, and correct. From the most worthwhile dining to cultural
          lifestyle insights that elevate the everyday, Delphi delivers the esteemed with speed. If you value taste, trust, and time —
          we invite you to join for access to the oracle and private editorial.
        </p>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <div class="footer">
    <p class="footer-note">
      Delphi is currently in private beta. We never sell your data. We may use it privately and securely to improve your recommendations and overall experience.
    </p>
    Delphi © 2025 — Oracle Meets Editor
  </div>

  <script type="module">
    import { createClient } from 'https://esm.sh/@supabase/supabase-js@2';

    // 1) WAITLIST PROJECT
    const WAITLIST_SUPABASE_URL = 'https://cidkxiclczieyofktfer.supabase.co';
    const WAITLIST_SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNpZGt4aWNsY3ppZXlvZmt0ZmVyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMzMjM4NzEsImV4cCI6MjA3ODg5OTg3MX0.10Vh8jbgAGg1RnaICRcOiPyQAdXzyB33R2hWwDVvkOU';
    const waitlist = createClient(WAITLIST_SUPABASE_URL, WAITLIST_SUPABASE_ANON_KEY);

    // 2) ORACLE PROJECT
    const ORACLE_SUPABASE_URL = 'https://fblfwnldvoqrryrfmreu.supabase.co';
    const ORACLE_SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZibGZ3bmxkdm9xcnJ5cmZtcmV1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIyMDMwODksImV4cCI6MjA3Nzc3OTA4OX0.eIIi7VWt0HCwLlkyRzVmu5YReDPrCo3VBscsN9dX5FM';
    const oracle = createClient(ORACLE_SUPABASE_URL, ORACLE_SUPABASE_ANON_KEY);

    // Waitlist form
    const betaForm = document.getElementById('beta-form');
    const betaMsg = document.getElementById('beta-message');

    betaForm.addEventListener('submit', async (event) => {
      event.preventDefault();
      betaMsg.textContent = 'Submitting…';

      const formData = new FormData(betaForm);
      const name = (formData.get('name') || '').toString().trim();
      const email = (formData.get('email') || '').toString().trim();
      const zip = (formData.get('zip') || '').toString().trim();

      if (!email) {
        betaMsg.textContent = 'Please enter a valid email.';
        return;
      }

      try {
        const { error } = await waitlist
          .from('waitlist_signups')
          .insert([{ name, email, zip }]);

        if (error) {
          console.error(error);
          betaMsg.textContent = 'Something went wrong. Please try again in a moment.';
          return;
        }

        betaMsg.textContent = "You're on the list. We'll email your access code ahead of the private release.";
        betaForm.reset();
      } catch (err) {
        console.error(err);
        betaMsg.textContent = 'Network issue. Please try again.';
      }
    });

    // Login popover UI
    const loginBtn = document.getElementById('loginBtn');
    const loginPop = document.getElementById('loginPop');
    const loginClose = document.getElementById('loginClose');
    const loginForm = document.getElementById('login-form');
    const loginMsg = document.getElementById('login-msg');

    function openLogin(){
      loginPop.classList.add('open');
      const input = loginForm.querySelector('input[name="email"]');
      if (input) input.focus();
    }
    function closeLogin(){
      loginPop.classList.remove('open');
      loginMsg.textContent = '';
      loginForm.reset();
    }

    loginBtn.addEventListener('click', (e) => {
      e.preventDefault();
      loginPop.classList.contains('open') ? closeLogin() : openLogin();
    });
    loginClose.addEventListener('click', closeLogin);

    document.addEventListener('click', (e) => {
      const within = loginPop.contains(e.target) || loginBtn.contains(e.target);
      if (!within) closeLogin();
    });

    // Login: send magic link
    loginForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      loginMsg.textContent = 'Sending link…';

      const formData = new FormData(loginForm);
      const email = (formData.get('email') || '').toString().trim();

      if (!email) {
        loginMsg.textContent = 'Enter a valid email.';
        return;
      }

      try {
        const { error } = await oracle.auth.signInWithOtp({
          email,
          options: {
            emailRedirectTo: 'https://thedelphi.io/oracle'
          }
        });

        if (error) {
          console.error(error);
          loginMsg.textContent = 'Could not send link. Try your approved email.';
          return;
        }

        loginMsg.textContent = 'Magic link sent. Check your email.';
      } catch (err) {
        console.error(err);
        loginMsg.textContent = 'Network issue. Try again.';
      }
    });
  </script>
</body>
</html>
